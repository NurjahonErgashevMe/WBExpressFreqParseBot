
### **Пошаговая инструкция для запуска телеграм-бота**

---

#### **1. Установка необходимых инструментов**

1. **Node.js**

   * Перейдите на [официальный сайт Node.js](https://nodejs.org/) и скачайте последнюю LTS-версию.
   * Установите скачанный установщик, следуя инструкциям.
   * После установки откройте терминал и проверьте, что Node.js и npm установлены:

     ```bash
     node -v
     npm -v
     ```

     Команды должны вернуть версии Node.js и npm.

2. **VS Code (Visual Studio Code)**

   * Загрузите [VS Code](https://code.visualstudio.com/), установите его и откройте.
   * Это удобный редактор для работы с кодом.

3. **Ngrok**

   * Перейдите на [сайт Ngrok](https://ngrok.com/) и создайте бесплатный аккаунт.
   * После регистрации скачайте и установите Ngrok (доступны версии для Windows, macOS и Linux).
   * После установки выполните следующие шаги:

     * Авторизуйтесь в Ngrok через терминал, используя ваш личный auth token:

       ```bash
       ngrok authtoken <ваш_auth_token>
       ```
     * Auth Token можно найти в вашем профиле на сайте Ngrok:

       1. Зайдите в ваш аккаунт на [ngrok.com](https://ngrok.com/).
       2. Перейдите в раздел **"Auth Token"** (обычно он находится в личном кабинете).
       3. Скопируйте токен и вставьте в команду выше.

---

#### **2. Получение токена для Телеграм-бота**

1. Откройте Telegram и найдите бота **BotFather** (официальный бот Telegram для создания ботов).
2. Напишите команду:

   ```
   /start
   ```

   и затем:

   ```
   /newbot
   ```
3. Следуйте инструкциям:

   * Введите имя бота (например, `ParserBot`).
   * Введите username для бота (например, `Parser_Bot`).
4. После успешного создания BotFather выдаст вам **токен**:

   ```
   123456789:ABCdefGHIjkLmNOPqrSTUVwxyz
   ```

   Скопируйте этот токен — он нужен для `.env`.

---

#### **3. Подготовка файлов проекта**

1. Скачайте файл `index.js` (главный файл вашего проекта) и поместите его в отдельную папку, например, `telegram-parser-bot`.
2. Создайте в папке файл `.env` и добавьте в него следующий шаблон (на основе `example.env`):

   ```
   TELEGRAM_BOT_TOKEN=ваш_токен_бот
   ADMIN_ID=тг_айди,тг_айди,тг_айди
   APP_URL=ваш_ngrok_url
   SETUP_SECRET=ваш_секретный_ключ
   NODE_ENV=development
   ```

   Замените placeholders:

   * `ваш_токен_бот` — вставьте токен из BotFather.
   * `тг_айди` — ваш Telegram ID (можно узнать, написав боту @userinfobot в Telegram).
   * `ваш_ngrok_url` — URL, который вы получите из Ngrok позже.
   * `ваш_секретный_ключ` — произвольный секретный ключ (например, `1234567890`).

---

#### **4. Установка зависимостей**

1. Откройте VS Code и выберите папку проекта.
2. Откройте терминал в VS Code (Ctrl + \`\`).
3. Введите команду для установки зависимостей:

   ```bash
   npm install
   ```

---

#### **5. Запуск ngrok**

1. В терминале выполните команду:

   ```bash
   ngrok http 3000
   ```

   Ngrok откроет туннель и выдаст HTTPS URL, например:

   ```
   https://abcd1234.ngrok.io
   ```
2. Скопируйте этот URL и вставьте его в файл `.env` вместо `ваш_ngrok_url`.

---

#### **6. Запуск сервера**

1. Убедитесь, что файл `.env` заполнен правильно.
   Он должен выглядеть примерно так:

   ```
   TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjkLmNOPqrSTUVwxyz
   ADMIN_ID=111222333,444555666
   APP_URL=https://abcd1234.ngrok.io
   SETUP_SECRET=1234567890
   NODE_ENV=development
   ```
2. В терминале VS Code запустите сервер:

   ```bash
   npm run dev
   ```

---

#### **7. Настройка Телеграм-бота**

1. Откройте в браузере следующий URL (замените `https://abcd1234.ngrok.io` и `1234567890` на значения из вашего `.env`):

   ```
   https://abcd1234.ngrok.io/api/setup?token=1234567890
   ```
2. Если все сделано правильно, в терминале вы увидите сообщение об успешной настройке.

---

#### **8. Проверка работы бота**

1. Найдите вашего бота в Telegram (по username, который вы указали при создании).
2. Напишите ему `/start`.
3. Бот должен ответить, что он запущен и готов к работе.

---

### **Часто возникающие проблемы**

* **Проблема с Ngrok:** Убедитесь, что Ngrok работает, и его URL указан в `.env`. Если URL меняется при перезапуске, обновите его в `.env`.
* **Токен бота неверный:** Убедитесь, что токен из BotFather скопирован полностью и без ошибок.
* **Node.js не установлен:** Проверьте, что `node -v` и `npm -v` возвращают версии.